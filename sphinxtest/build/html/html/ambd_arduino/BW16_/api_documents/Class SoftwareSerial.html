<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Class SoftwareSerial &mdash; 123 123 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Readme" href="Readme%20SoftwareSerial.html" />
    <link rel="prev" title="Class HttpClient" href="Class%20PMS3003.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> 123
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Open Source SDKs</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../arduino_index.html">Arduino SDK</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../AMB21/index.html">AMB21/AMB22 (RTL8722DM/RTL8722CSM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../AMB23/index.html">AMB23 (RTL8722DM MINI)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">BW16 (RTL8720DN)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../getting_started/ambd_getting_started.html">Getting Started</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples_and_components/index.html">Examples &amp; Components</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">API Documents</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="index.html#analog">Analog</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#audiocodec">AudioCodec</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#ble">BLE</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#epdif">EPDIF</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#fatfssdcard">FatfsSDCard</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#flashmemory">FlashMemory</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#gpio">GPIO</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#gtimer">GTimer</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#http">Http</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#irdevice">IRDevice</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#mdns">MDNS</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#mqttclient">MQTTClient</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#ntpclient">NTPClient</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#powersave">PowerSave</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#rtc">RTC</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html#softwareserial">SoftwareSerial</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#spi">SPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#sys">Sys</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#wdt">WDT</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#wifi">WiFi</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#wire">Wire</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#ws2812b">WS2812B</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../resources/index.html">Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/index.html">Support</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../ambd_micropython/micropython_index.html">MicroPython SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ambd_sdk/source/index.html">Standard SDK</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Download</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../download/AMB21_download.html">AMB21/AMB22 (RTL8722DM/RTL8722CSM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../download/AMB23_download.html">AMB23 (RTL8722DM MINI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../download/BW16_download.html">BW16 (RTL8720DN)</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">123</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../arduino_index.html">Arduino SDK</a> &raquo;</li>
          <li><a href="../index.html">BW16 (RTL8720DN)</a> &raquo;</li>
          <li><a href="index.html">API Documents</a> &raquo;</li>
      <li>Class SoftwareSerial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/ambd_arduino/BW16_/api_documents/Class SoftwareSerial.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="class-softwareserial">
<h1>Class SoftwareSerial<a class="headerlink" href="#class-softwareserial" title="Permalink to this heading"></a></h1>
<p><strong>SoftwareSerial Class</strong></p>
<div class="line-block">
<div class="line"><strong>Description</strong></div>
<div class="line">Defines a class of software serial implementation for Ameba.</div>
</div>
<div class="line-block">
<div class="line"><strong>Syntax</strong></div>
<div class="line">class SoftwareSerial</div>
</div>
<p><strong>Members</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Public Constructors</strong></p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SoftwareSerial::SoftwareSerial</p></td>
<td><p>Constructs a SoftwareSerial
object</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Public Methods</strong></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>SoftwareSerial::begin</p></td>
<td><p>Sets the speed (baud rate) for
the serial communication</p></td>
</tr>
<tr class="row-odd"><td><p>SoftwareSerial::listen</p></td>
<td><p>Enables the selected software
serial port to listen</p></td>
</tr>
<tr class="row-even"><td><p>SoftwareSerial::end</p></td>
<td><p>Same as stopListening</p></td>
</tr>
<tr class="row-odd"><td><p>SoftwareSerial::stopListening</p></td>
<td><p>Stop listening on the port</p></td>
</tr>
<tr class="row-even"><td><p>SoftwareSerial::peek</p></td>
<td><p>Return a character that was
received on the RX pin of the
software serial port</p></td>
</tr>
<tr class="row-odd"><td><p>SoftwareSerial::write</p></td>
<td><p>Prints data to the transmit pin
of the software serial port as
raw bytes</p></td>
</tr>
<tr class="row-even"><td><p>SoftwareSerial::read</p></td>
<td><p>Return a character that was
received on the RX pin of the
software serial port</p></td>
</tr>
<tr class="row-odd"><td><p>SoftwareSerial::available</p></td>
<td><p>Get the number of bytes
(characters) available for
reading from a software serial
port</p></td>
</tr>
<tr class="row-even"><td><p>SoftwareSerial::flush</p></td>
<td><p>Flush the received buffer</p></td>
</tr>
<tr class="row-odd"><td><p>SoftwareSerial::setBufferSize</p></td>
<td><p>Set buffer size</p></td>
</tr>
<tr class="row-even"><td><p>Soft
wareSerial::setAvailableCallback</p></td>
<td><p>Set available callback</p></td>
</tr>
<tr class="row-odd"><td><p>SoftwareSerial::handle_interrupt</p></td>
<td><p>Private methods handles
interrupt</p></td>
</tr>
</tbody>
</table>
<p><strong>SoftwareSerial::SoftwareSerial</strong></p>
<div class="line-block">
<div class="line"><strong>Description</strong></div>
<div class="line">Constructs a SoftwareSerial object and sets RX and TX pin, and inverse
logic.</div>
</div>
<div class="line-block">
<div class="line"><strong>Syntax</strong></div>
<div class="line">SoftwareSerial::SoftwareSerial(uint8_t receivePin, uint8_t
transmitPin, bool inverse_logic /* = false */)</div>
</div>
<div class="line-block">
<div class="line"><strong>Parameters</strong></div>
<div class="line">receivePin: the pin on which to receive serial data</div>
<div class="line">transmitPin: the pin on which to transmit serial data</div>
<div class="line">inverse_logic: is used to invert the sense of incoming bits</div>
</div>
<div class="line-block">
<div class="line"><strong>Returns</strong></div>
<div class="line">The function returns nothing.</div>
</div>
<div class="line-block">
<div class="line"><strong>Example Code</strong></div>
<div class="line">Example: SoftwareSerialExample</div>
<div class="line">The example demonstrates a software serial test, it receives from
serial RX and sends it to serial TX.</div>
</div>
<p>/*</p>
<p>The circuit: (BOARD RTL8195A)</p>
<p>* RX is digital pin 0 (connect to TX of other devices)</p>
<p>* TX is digital pin 1 (connect to RX of other devices)</p>
<p>*/</p>
<p><strong>#include &lt;SoftwareSerial.h&gt;</strong></p>
<p><strong>#if defined(BOARD_RTL8195A)</strong></p>
<p>SoftwareSerial mySerial(0, 1); // RX, TX</p>
<p><strong>#elif defined(BOARD_RTL8710)</strong></p>
<p>SoftwareSerial mySerial(17, 5); // RX, TX</p>
<p><strong>#else</strong></p>
<p>SoftwareSerial mySerial(0, 1); // RX, TX</p>
<p><strong>#endif</strong></p>
<p><strong>void</strong> setup() {</p>
<p>// Open serial communications and wait for port to open:</p>
<p>Serial.begin(57600);</p>
<p><strong>while</strong> (!Serial) {</p>
<p>; // wait for serial port to connect. Needed for native USB port only</p>
<p>}</p>
<p>Serial.println(“Goodnight moon!”);</p>
<p>// set the data rate for the SoftwareSerial port</p>
<p>mySerial.begin(4800);</p>
<p>mySerial.println(“Hello, world?”);</p>
<p>}</p>
<p><strong>void</strong> loop() { // run over and over</p>
<p><strong>if</strong> (mySerial.available()) {</p>
<p>mySerial.write(mySerial.read());</p>
<p>}</p>
<p>}</p>
<div class="line-block">
<div class="line"><strong>Notes and Warnings</strong></div>
<div class="line">Software Serial is using hardware serial thus DO NOT change the
default pins</div>
<div class="line"><br /></div>
</div>
<p><strong>SoftwareSerial::begin</strong></p>
<div class="line-block">
<div class="line"><strong>Description</strong></div>
<div class="line">Sets the speed (baud rate) for the serial communication</div>
</div>
<div class="line-block">
<div class="line"><strong>Syntax</strong></div>
<div class="line">void SoftwareSerial::begin(long speed)</div>
<div class="line">void SoftwareSerial::begin(long speed, int data_bits, int parity, int
stop_bits)</div>
<div class="line">void SoftwareSerial::begin(long speed, int data_bits, int parity, int
stop_bits, int flowctrl, int rtsPin, int ctsPin)</div>
</div>
<div class="line-block">
<div class="line"><strong>Parameters</strong></div>
<div class="line">speed: the baud rate</div>
<div class="line">data_bits: number of data bits, 8 bits(default) or 7 bits</div>
<div class="line">stop_bits: number of stop bits, 1 bit(default), 1.5 bits or 2 bits</div>
<div class="line">flowctrl: flow control pin</div>
<div class="line">rtsPin: request to send pin</div>
<div class="line">ctsPin: clear to send pin</div>
</div>
<div class="line-block">
<div class="line"><strong>Returns</strong></div>
<div class="line">The function returns nothing.</div>
</div>
<div class="line-block">
<div class="line"><strong>Example Code</strong></div>
<div class="line">Example: SoftwareSerialExample</div>
<div class="line">The example demonstrates a software serial test, it receives from
serial RX and sends it to serial TX. Details of the code can be found
in the previous section of SoftwareSerial_Basic:: SoftwareSerial.</div>
</div>
<div class="line-block">
<div class="line"><strong>Notes and Warnings</strong></div>
<div class="line">NA</div>
<div class="line"><br /></div>
</div>
<p><strong>SoftwareSerial::listen</strong></p>
<div class="line-block">
<div class="line"><strong>Description</strong></div>
<div class="line">Enables the selected software serial port to listen</div>
</div>
<div class="line-block">
<div class="line"><strong>Syntax</strong></div>
<div class="line">bool SoftwareSerial::listen(void)</div>
</div>
<div class="line-block">
<div class="line"><strong>Parameters</strong></div>
<div class="line">The function requires no input parameter.</div>
</div>
<div class="line-block">
<div class="line"><strong>Returns</strong></div>
<div class="line">Returns true if it replaces another</div>
</div>
<div class="line-block">
<div class="line"><strong>Example Code</strong></div>
<div class="line">NA</div>
</div>
<div class="line-block">
<div class="line"><strong>Notes and Warnings</strong></div>
<div class="line">NA</div>
<div class="line"><br /></div>
</div>
<p><strong>SoftwareSerial::end</strong></p>
<div class="line-block">
<div class="line"><strong>Description</strong></div>
<div class="line">Same as stopListening</div>
</div>
<div class="line-block">
<div class="line"><strong>Syntax</strong></div>
<div class="line">void SoftwareSerial::end(void)</div>
</div>
<div class="line-block">
<div class="line"><strong>Parameters</strong></div>
<div class="line">The function requires no input parameter.</div>
</div>
<div class="line-block">
<div class="line"><strong>Returns</strong></div>
<div class="line">The function returns nothing.</div>
</div>
<div class="line-block">
<div class="line"><strong>Example Code</strong></div>
<div class="line">NA</div>
</div>
<div class="line-block">
<div class="line"><strong>Notes and Warnings</strong></div>
<div class="line">NA</div>
<div class="line"><br /></div>
</div>
<p><strong>SoftwareSerial::isListening</strong></p>
<div class="line-block">
<div class="line"><strong>Description</strong></div>
<div class="line">Tests to see if requested software serial port is actively listening</div>
</div>
<div class="line-block">
<div class="line"><strong>Syntax</strong></div>
<div class="line">bool SoftwareSerial::isListening(void)</div>
</div>
<div class="line-block">
<div class="line"><strong>Parameters</strong></div>
<div class="line">The function requires no input parameter.</div>
</div>
<div class="line-block">
<div class="line"><strong>Returns</strong></div>
<div class="line">The function returns “True” if the port is listening.</div>
</div>
<div class="line-block">
<div class="line"><strong>Example Code</strong></div>
<div class="line">NA</div>
</div>
<div class="line-block">
<div class="line"><strong>Notes and Warnings</strong></div>
<div class="line">NA</div>
<div class="line"><br /></div>
</div>
<p><strong>SoftwareSerial::stopListening</strong></p>
<div class="line-block">
<div class="line"><strong>Description</strong></div>
<div class="line">Stop listening on the port</div>
</div>
<div class="line-block">
<div class="line"><strong>Syntax</strong></div>
<div class="line">bool SoftwareSerial::stopListening(void)</div>
</div>
<div class="line-block">
<div class="line"><strong>Parameters</strong></div>
<div class="line">The function requires no input parameter.</div>
</div>
<div class="line-block">
<div class="line"><strong>Returns</strong></div>
<div class="line">The function returns “True” if listening on the port is stopped.</div>
</div>
<div class="line-block">
<div class="line"><strong>Example Code</strong></div>
<div class="line">NA</div>
</div>
<div class="line-block">
<div class="line"><strong>Notes and Warnings</strong></div>
<div class="line">NA</div>
<div class="line"><br /></div>
</div>
<p><strong>SoftwareSerial::peek</strong></p>
<div class="line-block">
<div class="line"><strong>Description</strong></div>
<div class="line">Return a character that was received on the RX pin of the software
serial port</div>
</div>
<div class="line-block">
<div class="line"><strong>Syntax</strong></div>
<div class="line">int SoftwareSerial::peek(void)</div>
</div>
<div class="line-block">
<div class="line"><strong>Parameters</strong></div>
<div class="line">The function requires no input parameter.</div>
</div>
<div class="line-block">
<div class="line"><strong>Returns</strong></div>
<div class="line">The function returns the character read, or returns “-1” if none is
available.</div>
</div>
<div class="line-block">
<div class="line"><strong>Example Code</strong></div>
<div class="line">NA</div>
</div>
<div class="line-block">
<div class="line"><strong>Notes and Warnings</strong></div>
<div class="line">NA</div>
<div class="line"><br /></div>
</div>
<p><strong>SoftwareSerial::write</strong></p>
<div class="line-block">
<div class="line"><strong>Description</strong></div>
<div class="line">Prints data to the transmit pin of the software serial port as raw
bytes</div>
</div>
<div class="line-block">
<div class="line"><strong>Syntax</strong></div>
<div class="line">size_t SoftwareSerial::write(uint8_t b)</div>
</div>
<div class="line-block">
<div class="line"><strong>Parameters</strong></div>
<div class="line">b: byte to be written</div>
</div>
<div class="line-block">
<div class="line"><strong>Returns</strong></div>
<div class="line">The function returns the number of bytes written.</div>
</div>
<div class="line-block">
<div class="line"><strong>Example Code</strong></div>
<div class="line">Example: SoftwareSerialExample</div>
<div class="line">The example demonstrates a software serial test, it receives from
serial RX and sends it to serial TX. Details of the code can be found
in the previous section of SoftwareSerial:: SoftwareSerial.</div>
</div>
<div class="line-block">
<div class="line"><strong>Notes and Warnings</strong></div>
<div class="line">NA</div>
<div class="line"><br /></div>
</div>
<p><strong>SoftwareSerial::read</strong></p>
<div class="line-block">
<div class="line"><strong>Description</strong></div>
<div class="line">Return a character that was received on the RX pin of the software
serial port</div>
</div>
<div class="line-block">
<div class="line"><strong>Syntax</strong></div>
<div class="line">int SoftwareSerial::read(void)</div>
</div>
<div class="line-block">
<div class="line"><strong>Parameters</strong></div>
<div class="line">The function requires no input parameter.</div>
</div>
<div class="line-block">
<div class="line"><strong>Returns</strong></div>
<div class="line">The function returns the character read, or -1 if none is available.</div>
</div>
<div class="line-block">
<div class="line"><strong>Example Code</strong></div>
<div class="line">Example: SoftwareSerialExample</div>
<div class="line">The example demonstrates a software serial test, it receives from
serial RX and sends it to serial TX. Details of the code can be found
in the previous section of SoftwareSerial:: SoftwareSerial.</div>
</div>
<div class="line-block">
<div class="line"><strong>Notes and Warnings</strong></div>
<div class="line">NA</div>
<div class="line"><br /></div>
</div>
<p><strong>SoftwareSerial::available</strong></p>
<div class="line-block">
<div class="line"><strong>Description</strong></div>
<div class="line">Get the number of bytes available for reading from a software serial
port</div>
</div>
<div class="line-block">
<div class="line"><strong>Syntax</strong></div>
<div class="line">int SoftwareSerial::available(void)</div>
</div>
<div class="line-block">
<div class="line"><strong>Parameters</strong></div>
<div class="line">The function requires no input parameter.</div>
</div>
<div class="line-block">
<div class="line"><strong>Returns</strong></div>
<div class="line">The function returns the number of bytes available to read.</div>
</div>
<div class="line-block">
<div class="line"><strong>Example Code</strong></div>
<div class="line">Example: SoftwareSerialExample</div>
<div class="line">The example demonstrates a software serial test, it receives from
serial RX and sends it to serial TX. Details of the code can be found
in the previous section of SoftwareSerial:: SoftwareSerial.</div>
</div>
<div class="line-block">
<div class="line"><strong>Notes and Warnings</strong></div>
<div class="line">NA</div>
<div class="line"><br /></div>
</div>
<p><strong>SoftwareSerial::flush</strong></p>
<div class="line-block">
<div class="line"><strong>Description</strong></div>
<div class="line">Flush the received buffer</div>
</div>
<div class="line-block">
<div class="line"><strong>Syntax</strong></div>
<div class="line">void SoftwareSerial::flush(void)</div>
</div>
<div class="line-block">
<div class="line"><strong>Parameters</strong></div>
<div class="line">The function requires no input parameter.</div>
</div>
<div class="line-block">
<div class="line"><strong>Returns</strong></div>
<div class="line">The function returns nothing.</div>
</div>
<div class="line-block">
<div class="line"><strong>Example Code</strong></div>
<div class="line">NA</div>
</div>
<div class="line-block">
<div class="line"><strong>Notes and Warnings</strong></div>
<div class="line">NA</div>
<div class="line"><br /></div>
</div>
<p><strong>SoftwareSerial::setBufferSize</strong></p>
<div class="line-block">
<div class="line"><strong>Description</strong></div>
<div class="line">Set buffer size</div>
</div>
<div class="line-block">
<div class="line"><strong>Syntax</strong></div>
<div class="line">void SoftwareSerial::setBufferSize(uint32_t buffer_size)</div>
</div>
<div class="line-block">
<div class="line"><strong>Parameters</strong></div>
<div class="line">buffer_size: the size of the serial buffer</div>
</div>
<div class="line-block">
<div class="line"><strong>Returns</strong></div>
<div class="line">The function returns nothing.</div>
</div>
<div class="line-block">
<div class="line"><strong>Example Code</strong></div>
<div class="line">NA</div>
</div>
<div class="line-block">
<div class="line"><strong>Notes and Warnings</strong></div>
<div class="line">NA</div>
<div class="line"><br /></div>
</div>
<p><strong>SoftwareSerial::setAvailableCallback</strong></p>
<div class="line-block">
<div class="line"><strong>Description</strong></div>
<div class="line">Set available callback</div>
</div>
<div class="line-block">
<div class="line"><strong>Syntax</strong></div>
<div class="line">void SoftwareSerial::setAvailableCallback(void (*callback)(char c))</div>
</div>
<div class="line-block">
<div class="line"><strong>Parameters</strong></div>
<div class="line">*callback: user-defined serial callback function</div>
</div>
<div class="line-block">
<div class="line"><strong>Returns</strong></div>
<div class="line">The function returns nothing.</div>
</div>
<div class="line-block">
<div class="line"><strong>Example Code</strong></div>
<div class="line">Example: SoftwareSerialIrqCallback</div>
<div class="line">This example demonstrates the software serial testing using IRQ
callback and semaphore. Set callback function “mySerialCalback” to
software serial. Whenever there is data comes in, “mySerialCallback”
is invoked. In this sketch, it does nothing until the end of the line.
And then it sends a semaphore. The loop() uses a non-busy loop to wait
for the semaphore. To test this sketch, you need to type something on
software serial and then press Enter.</div>
</div>
<p>/*</p>
<p>The circuit: (BOARD RTL8195A)</p>
<p>RX is digital pin 0 (connect to TX of other devices)</p>
<p>TX is digital pin 1 (connect to RX of other devices)</p>
<p>*/</p>
<p><strong>#include &lt;SoftwareSerial.h&gt;</strong></p>
<p><strong>#if defined(BOARD_RTL8195A)</strong></p>
<p>SoftwareSerial mySerial(0, 1); // RX, TX</p>
<p><strong>#elif defined(BOARD_RTL8710)</strong></p>
<p>SoftwareSerial mySerial(17, 5); // RX, TX</p>
<p><strong>#else</strong></p>
<p>SoftwareSerial mySerial(0, 1); // RX, TX</p>
<p><strong>#endif</strong></p>
<p><strong>uint32_t</strong> semaID;</p>
<p>// The callback is hooking at UART IRQ handler and please don’t do heavy
task here.</p>
<p><strong>void</strong> mySerialCallback(<strong>char</strong> c)</p>
<p>{</p>
<p>/* The parameter c is only for peeking. The actual data is</p>
<p>* still in the buffer of SoftwareSerial.</p>
<p>*/</p>
<p><strong>if</strong> (c == ‘r’ || c == ‘n’) {</p>
<p>os_semaphore_release(semaID);</p>
<p>}</p>
<p>}</p>
<p><strong>void</strong> setup() {</p>
<p>// use 1 count for binary semaphore</p>
<p>semaID = os_semaphore_create(1);</p>
<p>// There is a token in the semaphore, clear it.</p>
<p>os_semaphore_wait(semaID, <em>0xFFFFFFFF</em>);</p>
<p>// set the data rate for the SoftwareSerial port</p>
<p>mySerial.begin(38400);</p>
<p>mySerial.setAvailableCallback(mySerialCallback);</p>
<p>}</p>
<p><strong>void</strong> loop() { // run over and over</p>
<p>// wait semaphore for 5s timeout</p>
<p><strong>if</strong> (os_semaphore_wait(semaID, 5 * 1000)) {</p>
<p>// we got data before timeout</p>
<p><strong>while</strong>(mySerial.available()) {</p>
<p>mySerial.print((<strong>char</strong>)mySerial.read());</p>
<p>}</p>
<p>mySerial.println();</p>
<p>} <strong>else</strong> {</p>
<p>mySerial.println(“No data comes in.”);</p>
<p>}</p>
<p>}</p>
<div class="line-block">
<div class="line"><strong>Notes and Warnings</strong></div>
<div class="line">NA</div>
<div class="line"><br /></div>
</div>
<p><strong>SoftwareSerial::handle_interrupt</strong></p>
<div class="line-block">
<div class="line"><strong>Description</strong></div>
<div class="line">A private method handles the interrupt</div>
</div>
<div class="line-block">
<div class="line"><strong>Syntax</strong></div>
<div class="line">void handle_interrupt(uint32_t id, uint32_t event)</div>
</div>
<div class="line-block">
<div class="line"><strong>Parameters</strong></div>
<div class="line">id: the interupt id</div>
<div class="line">event: interrupt event</div>
</div>
<div class="line-block">
<div class="line"><strong>Returns</strong></div>
<div class="line">The function returns nothing.</div>
</div>
<div class="line-block">
<div class="line"><strong>Example Code</strong></div>
<div class="line">NA</div>
</div>
<div class="line-block">
<div class="line"><strong>Notes and Warnings</strong></div>
<div class="line">NA</div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Class%20PMS3003.html" class="btn btn-neutral float-left" title="Class HttpClient" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Readme%20SoftwareSerial.html" class="btn btn-neutral float-right" title="Readme" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, 123.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>