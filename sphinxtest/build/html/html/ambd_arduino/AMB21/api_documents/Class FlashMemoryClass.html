<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Class FlashMemory &mdash; 123 123 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Class DHT" href="Class%20DHT.html" />
    <link rel="prev" title="Class SdFatFile" href="Class%20SdFatFile.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> 123
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Open Source SDKs</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../arduino_index.html">Arduino SDK</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">AMB21/AMB22 (RTL8722DM/RTL8722CSM)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../getting_started/ambd_getting_started.html">Getting Started</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_history/Release_History.html">Release History</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples_and_components/index.html">Examples &amp; Components</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">API Documents</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="index.html#analog">Analog</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#audiocodec">AudioCodec</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#ble">BLE</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#epdif">EPDIF</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#fatfssdcard">FatfsSDCard</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html#flashmemory">FlashMemory</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#gpio">GPIO</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#gtimer">GTimer</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#http">Http</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#irdevice">IRDevice</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#mdns">MDNS</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#mqttclient">MQTTClient</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#ntpclient">NTPClient</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#powersave">PowerSave</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#rtc">RTC</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#softwareserial">SoftwareSerial</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#spi">SPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#sys">Sys</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#usb">USB</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#wdt">WDT</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#wifi">WiFi</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#wire">Wire</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#ws2812b">WS2812B</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../resources/index.html">Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/index.html">Support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../AMB23/index.html">AMB23 (RTL8722DM MINI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../BW16_/index.html">BW16 (RTL8720DN)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../ambd_micropython/micropython_index.html">MicroPython SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ambd_sdk/source/index.html">Standard SDK</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Download</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../download/AMB21_download.html">AMB21/AMB22 (RTL8722DM/RTL8722CSM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../download/AMB23_download.html">AMB23 (RTL8722DM MINI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../download/BW16_download.html">BW16 (RTL8720DN)</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">123</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../arduino_index.html">Arduino SDK</a> &raquo;</li>
          <li><a href="../index.html">AMB21/AMB22 (RTL8722DM/RTL8722CSM)</a> &raquo;</li>
          <li><a href="index.html">API Documents</a> &raquo;</li>
      <li>Class FlashMemory</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/ambd_arduino/AMB21/api_documents/Class FlashMemoryClass.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="class-flashmemory">
<h1>Class FlashMemory<a class="headerlink" href="#class-flashmemory" title="Permalink to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="FlashMemory">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">FlashMemory</span></span><a class="headerlink" href="#FlashMemory" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p><strong>Description</strong></p>
<p>Defines a class of Flash memory API</p>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">FlashMemoryClass</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Members</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Public Constructors</strong></p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Fl
ashMemoryClass::FlashMemoryClass</p></td>
<td><p>Constructs a FlashMemoryClass
object</p></td>
</tr>
<tr class="row-odd"><td><p>Fla
shMemoryClass::~FlashMemoryClass</p></td>
<td><p>Deconstructs a FlashMemoryClass
object</p></td>
</tr>
<tr class="row-even"><td><p><strong>Public Methods</strong></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>FlashMemoryClass::begin</p></td>
<td><p>Initialize/Re-initialize the
base address and size</p></td>
</tr>
<tr class="row-even"><td><p>FlashMemoryClass::read</p></td>
<td><p>Read the content to buf</p></td>
</tr>
<tr class="row-odd"><td><p>FlashMemoryClass::update</p></td>
<td><p>Write buf back to flash memory</p></td>
</tr>
<tr class="row-even"><td><p>FlashMemoryClass::readWord</p></td>
<td><p>Read 4 bytes from flash memory</p></td>
</tr>
<tr class="row-odd"><td><p>FlashMemoryClass::writeWord</p></td>
<td><p>Write 4 bytes into flash memory</p></td>
</tr>
<tr class="row-even"><td><p>FlashMemoryClass::buf_size</p></td>
<td><p>The buf size</p></td>
</tr>
<tr class="row-odd"><td><p>FlashMemoryClass::*buf</p></td>
<td><p>The buf to be operated</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">FlashMemoryClass::FlashMemoryClass</span></span></dt>
<dd></dd></dl>

<p><strong>Description</strong></p>
<p>Constructs a FlashMemoryClass object.</p>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">FlashMemoryClass</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">_base_address</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">_buf_size</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Parameters</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">\_base_address</span></code> : The base address to operate.</p>
<p><code class="docutils literal notranslate"><span class="pre">\_buf_size</span></code> : The buf size for mirror a copy to reduce flash memory operation</p>
<p><strong>Returns</strong></p>
<p>The function returns nothing.</p>
<p><strong>Example Code</strong></p>
<p>Example: FleshMemory_Basic</p>
<p>This example demonstrates the basic use of flash memory. Since boot count is stored in flash, each time upon device boot up, the boot count will be read from the flash, add one, then write back to the
flash. Ameba’s flash memory can be edit in a unit of a sector which has the size of 4K bytes.
Direct read from flash memory is allowed. To write data into flash memory, each bit on flash memory can only change from ‘1’ to ‘0’ and it cannot change from ‘0’ to ‘1’. To make sure the data are correctly
written we do erase the flash memory sector before write data on it.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">FlashMemory_Basic</span><a class="headerlink" href="#id1" title="Permalink to this code"></a></div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">  </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;FlashMemory.h&quot;</span><span class="cp"></span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">    </span><span class="n">FlashMemory</span><span class="p">.</span><span class="n">read</span><span class="p">();</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">FlashMemory</span><span class="p">.</span><span class="n">buf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">0xFF</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 6</span><span class="w">      </span><span class="n">FlashMemory</span><span class="p">.</span><span class="n">buf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x00</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 7</span><span class="w">      </span><span class="n">FlashMemory</span><span class="p">.</span><span class="n">update</span><span class="p">();</span><span class="w"></span>
<span class="linenos"> 8</span><span class="w">      </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;write count to 0&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">10</span><span class="w">      </span><span class="n">FlashMemory</span><span class="p">.</span><span class="n">buf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">11</span><span class="w">      </span><span class="n">FlashMemory</span><span class="p">.</span><span class="n">update</span><span class="p">();</span><span class="w"></span>
<span class="linenos">12</span><span class="w">      </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Boot count: &quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">13</span><span class="w">      </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">FlashMemory</span><span class="p">.</span><span class="n">buf</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"></span>
<span class="linenos">14</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">15</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">18</span><span class="w">    </span><span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span><span class="w"></span>
<span class="linenos">19</span><span class="w">  </span><span class="p">}</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<p>Example: ReadWriteOneWord</p>
<p>This example shows how to request flash memory larger than default
0x4000, and read/write one specific word (32-bit).</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">ReadWriteOneWord</span><a class="headerlink" href="#id2" title="Permalink to this code"></a></div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;FlashMemory.h&quot;</span><span class="cp"></span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">  </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">  </span><span class="cm">/* request flash size 0x4000 from 0xFC000 */</span><span class="w"></span>
<span class="linenos"> 6</span><span class="w">  </span><span class="n">FlashMemory</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mh">0xFC000</span><span class="p">,</span><span class="w"> </span><span class="mh">0x4000</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="w">  </span><span class="cm">/* read one word (32-bit) from 0xFC000 plus offset 0x3F00 */</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">  </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FlashMemory</span><span class="p">.</span><span class="n">readWord</span><span class="p">(</span><span class="mh">0x3F00</span><span class="p">);</span><span class="w"></span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;value is 0x%08X</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="w"></span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">0xFFFFFFFF</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">14</span><span class="w">    </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos">15</span><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">16</span><span class="w">    </span><span class="n">value</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">17</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="w">  </span><span class="cm">/* write one word (32-bit) to 0xFC000 plus offset 0x3F00 */</span><span class="w"></span>
<span class="linenos">20</span><span class="w">  </span><span class="n">FlashMemory</span><span class="p">.</span><span class="n">writeWord</span><span class="p">(</span><span class="mh">0x3F00</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="w"></span>
<span class="linenos">21</span><span class="p">}</span><span class="w"></span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">24</span><span class="w">  </span><span class="c1">// put your main code here, to run repeatedly:</span>
<span class="linenos">25</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<p><strong>Notes and Warnings</strong></p>
<p>Include “FlashMemory.h” to use the class function.</p>
<hr class="docutils" />
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">FlashMemoryClass::begin</span></span></dt>
<dd></dd></dl>

<p><strong>Description</strong></p>
<p>Initialize/Re-initialize the base address and size. The base address shell aligns with the size of 0x1000. And the size shell is multiple of 0x1000.</p>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">begin</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">_base_address</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">_buf_size</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Parameters</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">_base_address</span></code>: The base address</p>
<p><code class="docutils literal notranslate"><span class="pre">_buf_size</span></code> : The desired work size</p>
<p><strong>Returns</strong></p>
<p>The function returns nothing.</p>
<p><strong>Example Code</strong></p>
<p>Example: FleshMemory_Basic</p>
<p>This example demonstrates the basic use of flash memory. Since boot count is stored in flash, each time upon device boot up, the boot count will be read from the flash, add one, then write back to the
flash. Ameba’s flash memory can be edit in a unit of a sector which has the size of 4K bytes.</p>
<hr class="docutils" />
<p>Example: ReadWriteOneWord</p>
<p>This example shows how to request flash memory larger than default 0x4000, and read/write one specific word (32-bit). Details of the example codes can be found in the previous section of <code class="docutils literal notranslate"><span class="pre">FlashMemoryClass::</span> <span class="pre">FlashMemoryClass</span></code>.</p>
<p><strong>Notes and Warnings</strong></p>
<p>Include “FlashMemory.h” to use the class function.</p>
<hr class="docutils" />
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">FlashMemoryClass::read</span></span></dt>
<dd></dd></dl>

<p><strong>Description</strong></p>
<p>Read the content to buf. Read flash memory into the buf. The size would be 0x1000.</p>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">read</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Parameters</strong></p>
<p>The function requires no input parameter.</p>
<p><strong>Returns</strong></p>
<p>The function returns nothing.</p>
<p><strong>Example Code</strong></p>
<p>Example: FleshMemory_Basic</p>
<p>This example demonstrates the basic use of flash memory. Since boot count is stored in flash, each time upon device boot up, the boot count will be read from the flash, add one, then write back to the
flash. Ameba’s flash memory can be edit in a unit of a sector which has the size of 4K bytes. Details of the example codes can be found in the previous section of <code class="docutils literal notranslate"><span class="pre">FlashMemoryClass::</span> <span class="pre">FlashMemoryClass</span></code>.</p>
<p><strong>Notes and Warnings</strong></p>
<p>Include “FlashMemory.h” to use the class function.</p>
<hr class="docutils" />
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">FlashMemoryClass::update</span></span></dt>
<dd></dd></dl>

<p><strong>Description</strong></p>
<p>Write buf back to flash memory. Write flash memory with the content of the buffer. The size is 0x1000.</p>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="n">erase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Parameters</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">erase</span></code>: By default, it is true and erases flash memory before writing to it</p>
<p><strong>Returns</strong></p>
<p>The function returns nothing.</p>
<p><strong>Example Code</strong></p>
<p>Example: FleshMemory_Basic</p>
<p>This example demonstrates the basic use of flash memory. Since boot count is stored in flash, each time upon device boot up, the boot
count will be read from the flash, add one, then write back to the flash. Ameba’s flash memory can be edit in a unit of a sector which has the size of 4K bytes.
Details of the example codes can be found in the previous section of <code class="docutils literal notranslate"><span class="pre">FlashMemoryClass::</span> <span class="pre">FlashMemoryClass</span></code>.</p>
<p><strong>Notes and Warnings</strong></p>
<p>Include “FlashMemory.h” to use the class function.</p>
<hr class="docutils" />
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">FlashMemoryClass::readWord</span></span></dt>
<dd></dd></dl>

<p><strong>Description</strong></p>
<p>Read 4 bytes from flash memory. Read 4 byte from specific offset based on base address.</p>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">readWord</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">offset</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Parameters</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">offset</span></code> : The offset according to the base address</p>
<p><strong>Returns</strong></p>
<p>The read data with a size of 4 bytes</p>
<p><strong>Example Code</strong></p>
<p>Example: ReadWriteOneWord</p>
<p>This example shows how to request flash memory larger than default 0x4000, and read/write one specific word (32-bit).
Details of the example codes can be found in the previous section of <code class="docutils literal notranslate"><span class="pre">FlashMemoryClass::</span> <span class="pre">FlashMemoryClass</span></code>.</p>
<p><strong>Notes and Warnings</strong></p>
<p>Include “FlashMemory.h” to use the class function.</p>
<hr class="docutils" />
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">FlashMemoryClass::writeWord</span></span></dt>
<dd></dd></dl>

<p><strong>Description</strong></p>
<p>Write 4 bytes into flash memory. It will try to write 4 bytes first. If the read data differ from the write data, then we buffer the sector
of flash memory, erase it, and write correct data back to it.</p>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">writeWord</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">offset</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">data</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Parameters</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">offset</span></code> : The offset according to the base address</p>
<p><code class="docutils literal notranslate"><span class="pre">data</span></code> : The data to be written</p>
<p><strong>Returns</strong></p>
<p>The function returns nothing.</p>
<p><strong>Example Code</strong></p>
<p>Example: ReadWriteOneWord</p>
<p>This example shows how to request flash memory larger than default 0x4000, and read/write one specific word (32-bit).
Details of the example codes can be found in the previous section of <code class="docutils literal notranslate"><span class="pre">FlashMemoryClass::</span> <span class="pre">FlashMemoryClass</span></code>.</p>
<p><strong>Notes and Warnings</strong></p>
<p>Include “FlashMemory.h” to use the class function.</p>
<hr class="docutils" />
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">FlashMemoryClass::buf_size</span></span></dt>
<dd></dd></dl>

<p><strong>Description</strong></p>
<p>The buf size (It can be regarded as work size).</p>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_size</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Example Code</strong></p>
<p>Example: FlashMemory_Basic</p>
<p>This example demonstrates the basic use of flash memory. Since boot count is stored in flash, each time upon device boot up, the boot
count will be read from the flash, add one, then write back to the flash. Ameba’s flash memory can be edit in a unit of a sector which has the size of 4K bytes.
Details of the example codes can be found in the previous section of <code class="docutils literal notranslate"><span class="pre">FlashMemoryClass::</span> <span class="pre">FlashMemoryClass</span></code>.</p>
<p><strong>Notes and Warnings</strong></p>
<p>Include “FlashMemory.h” to use the class function.</p>
<hr class="docutils" />
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">FlashMemoryClass::*buf</span></span></dt>
<dd></dd></dl>

<p><strong>Description</strong></p>
<p>The buf to be operated. Modify buf won’t change the content of the buf. It needs an update to write back to flash memory.</p>
<p><strong>Syntax</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">buf</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Example Code</strong></p>
<p>NA</p>
<p><strong>Notes and Warnings</strong></p>
<p>Include “FlashMemory.h” to use the class function.</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Class%20SdFatFile.html" class="btn btn-neutral float-left" title="Class SdFatFile" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Class%20DHT.html" class="btn btn-neutral float-right" title="Class DHT" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, 123.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>